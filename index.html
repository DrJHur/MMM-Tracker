<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Mind Mirror (MMM)</title>
    <!-- Pretendard Font -->
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard-dynamic-subset.css" />
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <style>
        /* Custom scrollbar */
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #ACCAB2; border-radius: 3px; }
        .custom-scrollbar::-webkit-scrollbar-track { background-color: #f7f7f7; }

        /* Background Gradient */
        body {
            background: linear-gradient(135deg, #e6d6ff 0%, #d6ffe1 25%, #fff5d6 50%, #ffd6e6 75%);
            background-attachment: fixed; 
        }
        
        /* Color Palette */
        .phq-card-color, .gad-card-color, .pss-card-color { background-color: #f0f8ff; }
        
        /* Font */
        .font-sans { font-family: 'Pretendard Variable', Pretendard, sans-serif; }

        /* Canvas Size */
        canvas { width: 100% !important; height: 100% !important; }
    </style>
</head>
<body class="font-sans min-h-screen flex items-center justify-center p-4 relative overflow-y-auto">

    <!-- Main Container -->
    <div id="app" class="w-full max-w-4xl bg-white/90 backdrop-blur-sm shadow-2xl rounded-2xl p-6 md:p-10 border border-gray-100 relative z-10 my-8">

        <!-- Title Wrapper -->
        <div class="relative mb-8 pt-4"> 
            <h1 class="text-3xl font-bold text-gray-800 mb-2 text-center relative z-10">My Mind Mirror, MMM (음-)</h1>
            <p class="text-sm text-gray-500 text-center relative z-10">1주일에 한 번은 검사를 진행하고, 음- 그렇구나,하고 자기 마음을 알아주세요.</p>
        </div>

        <!-- User Info -->
        <div class="mb-6 flex justify-between items-center text-sm">
            <div id="user-info" class="text-gray-600 flex items-center space-x-4">
                <p>사용자 ID: <span id="display-user-id" class="font-mono text-xs bg-gray-100 px-2 py-1 rounded">인증 필요</span></p>
                <p class="mt-1">인증 상태: <span id="auth-status" class="font-semibold text-red-500">인증 로드 중...</span></p>
                <button id="signout-button" class="hidden text-xs px-2 py-1 bg-red-400 text-white rounded-lg hover:bg-red-500 transition ml-4">로그아웃</button>
            </div>
            <div id="loading-indicator" class="hidden flex items-center space-x-2 text-blue-500">
                <svg class="animate-spin h-5 w-5" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                <span>처리 중...</span>
            </div>
        </div>

        <!-- Login/Signup Form -->
        <div id="auth-blocker" class="mb-6 p-6 bg-red-50 border border-red-300 rounded-xl">
            <h3 class="font-bold text-lg text-red-700 mb-2">회원가입/로그인 필요</h3>
            <p class="text-red-600 mb-4">개인 정보의 안전한 저장을 위해 이메일과 비밀번호로 회원가입, 로그인 해주세요.</p>
            
            <form id="auth-form">
                <input type="email" id="auth-email" placeholder="이메일 주소" required class="w-full p-2 mb-3 border border-gray-300
